<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MOTIWAYVE GAME PANEL</title>
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.css" />
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background: #fff; font-family: 'Pretendard', sans-serif; }
        #stage { position: relative; width: 100%; height: 100%; background: #fff; cursor: pointer; }

        /* 상단 프로젝트 디스플레이 (영역 확장 및 디자인 개선) */
        #display-screen {
            position: absolute; top: 20px; left: 50%; transform: translateX(-50%);
            width: 90%; height: 160px; border: 2px solid #000;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            text-align: center; padding: 15px; box-sizing: border-box;
            background: #fff; z-index: 20; transition: all 0.3s ease;
        }
        #display-title { font-size: 1.3rem; font-weight: 800; color: #000; margin-bottom: 10px; text-transform: uppercase; letter-spacing: 2px; }
        #display-desc { font-size: 0.9rem; color: #444; line-height: 1.5; word-break: keep-all; max-width: 450px; }

        /* 캐릭터 설정 */
        #player {
            position: absolute; bottom: 60px; left: 50%; transform: translateX(-50%);
            width: 80px; height: 100px;
            background-size: contain; background-repeat: no-repeat; background-position: center;
            z-index: 10; transition: bottom 0.25s cubic-bezier(0.215, 0.61, 0.355, 1);
        }

        /* 흐르는 박스 */
        .project-box {
            position: absolute; 
            top: 200px; /* 고정 위치 */
            padding: 12px 25px; border: 2px solid #000; background: #fff;
            color: #000; font-size: 1rem; font-weight: 800;
            white-space: nowrap; pointer-events: none; z-index: 5;
            transition: transform 0.1s, background 0.2s;
        }

        .tap-guide {
            position: absolute; bottom: 15px; left: 50%; transform: translateX(-50%);
            color: #aaa; font-size: 0.75rem; font-weight: 600; text-align: center; line-height: 1.5;
        }
    </style>
</head>
<body onclick="jump()">
    <div id="stage">
        <div id="display-screen">
            <div id="display-title">TOUCH TO START</div>
            <div id="display-desc">박스를 점프해서 타격하여 프로젝트 상세 내용을 확인하세요.</div>
        </div>
        <div id="player"></div>
        <div id="box-lane"></div>
        <div class="tap-guide">TAP TO JUMP<br>캐릭터를 터치해서 점프해보세요</div>
    </div>

    <script>
        const player = document.getElementById('player');
        const lane = document.getElementById('box-lane');
        const displayTitle = document.getElementById('display-title');
        const displayDesc = document.getElementById('display-desc');

        let isJumping = false;
        
        // 요청하신 데이터 반영
        const categoryData = {
            '3D MEDIA': '리얼타임/오프라인 렌더형식으로 리얼하고 아름다운 3D ART 생성합니다.',
            'AR / VR': '이미지, 좌표, 오브젝트, 공간, 인체등 인식을 바탕으로 증강현실과 체험형 가상현실을 생성합니다.',
            '2D DESIGN': '다양한 툴로 이미지 및 3D로 컨셉이미지, 공간, 상황, 광고, 제안 등 다양한 2D 작업을 제공합니다.',
            'APP': '사용자 맞춤 체험형 앱을 생성합니다.',
            'GAME': '사용자 맞춤 체험형 게임을 생성합니다.'
        };
        const projects = Object.keys(categoryData);
        const runImages = ['run_character1.png', 'run_character2.png', 'run_character3.png'];
        let boxes = [];
        let frame = 0;

        // 달리기 애니메이션
        setInterval(() => {
            if(!isJumping) {
                player.style.backgroundImage = `url('${runImages[frame]}')`;
                frame = (frame + 1) % runImages.length;
            } else {
                player.style.backgroundImage = `url('${runImages[1]}')`;
            }
        }, 120);

        function initBoxes() {
            projects.forEach((name, i) => {
                const el = document.createElement('div');
                el.className = 'project-box';
                el.innerText = name;
                let spacing = window.innerWidth > 768 ? 400 : 280;
                let x = window.innerWidth + (i * spacing);
                lane.appendChild(el);
                boxes.push({ el, x, name });
            });
        }

        function jump() {
            if (isJumping) return;
            isJumping = true;
            
            // 박스 밑면에 딱 닿도록 높이 조절 (뚫고 올라가지 않게)
            player.style.bottom = '145px'; 

            setTimeout(() => {
                player.style.bottom = '60px';
                setTimeout(() => { isJumping = false; }, 100);
            }, 300);
        }

        function update() {
            boxes.forEach(box => {
                box.x -= (window.innerWidth > 768 ? 5 : 4);
                if (box.x < -300) {
                    let rightmostX = Math.max(...boxes.map(b => b.x));
                    let spacing = window.innerWidth > 768 ? 400 : 280;
                    box.x = rightmostX + spacing;
                }
                box.el.style.left = box.x + 'px';

                // 충돌 판정
                const pRect = player.getBoundingClientRect();
                const bRect = box.el.getBoundingClientRect();

                if (isJumping && 
                    pRect.left < bRect.right && pRect.right > bRect.left &&
                    pRect.top <= bRect.bottom && pRect.bottom > bRect.top) {

                    // 상단 디스플레이 업데이트
                    displayTitle.innerText = box.name;
                    displayDesc.innerText = categoryData[box.name];

                    // 시각적 피드백
                    document.getElementById('display-screen').style.background = "#000";
                    displayTitle.style.color = "#fff";
                    displayDesc.style.color = "#ccc";
                    
                    box.el.style.background = '#000';
                    box.el.style.color = '#fff';
                    box.el.style.transform = 'translateY(-10px)';

                    setTimeout(() => {
                        document.getElementById('display-screen').style.background = "#fff";
                        displayTitle.style.color = "#000";
                        displayDesc.style.color = "#444";
                        box.el.style.background = '#fff';
                        box.el.style.color = '#000';
                        box.el.style.transform = 'translateY(0)';
                    }, 250);
                }
            });
            requestAnimationFrame(update);
        }

        initBoxes();
        update();
    </script>
</body>
</html>
