<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background: #000; font-family: sans-serif; }
        
        #stage {
            position: relative; width: 100%; height: 100%;
            background: linear-gradient(to bottom, #111 0%, #000 100%);
            cursor: pointer;
        }

        /* 상단 프로젝트 디스플레이 (박스 치면 바뀌는 곳) */
        #display-screen {
            position: absolute; top: 30px; left: 50%; transform: translateX(-50%);
            width: 80%; height: 100px; border: 1px solid #333;
            display: flex; align-items: center; justify-content: center;
            color: #555; font-size: 1.2rem; font-weight: 800; text-transform: uppercase;
            letter-spacing: 2px; transition: all 0.3s;
        }
        #display-screen.active { color: #fff; border-color: #fff; text-shadow: 0 0 10px #fff; }

        /* 캐릭터 (임시 사각형) */
        #player {
            position: absolute; bottom: 80px; left: 80px;
            width: 40px; height: 60px; background: #fff;
            transition: bottom 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 10;
        }

        /* 흐르는 박스 */
        .project-box {
            position: absolute; top: 160px; padding: 10px 20px;
            border: 1px solid #fff; color: #fff; font-size: 0.9rem; font-weight: 600;
            white-space: nowrap; pointer-events: none;
            transition: transform 0.1s;
        }

        .tap-guide {
            position: absolute; bottom: 30px; left: 50%; transform: translateX(-50%);
            color: #444; font-size: 0.75rem; letter-spacing: 1px;
        }
    </style>
</head>
<body onclick="jump()">
    <div id="stage">
        <div id="display-screen">Select Project by Jumping</div>
        <div id="player"></div>
        <div id="box-lane"></div>
        <div class="tap-guide">TAP TO JUMP</div>
    </div>

    <script>
        const player = document.getElementById('player');
        const lane = document.getElementById('box-lane');
        const screen = document.getElementById('display-screen');
        
        let isJumping = false;
        const projects = ['AR Content', '3D Media Art', 'Interactive Game', 'VFX Design', 'Digital Twin'];
        let boxes = [];

        // 박스 생성 및 초기화
        function initBoxes() {
            projects.forEach((name, i) => {
                const el = document.createElement('div');
                el.className = 'project-box';
                el.innerText = name;
                let spacing = window.innerWidth > 768 ? 300 : 200;
                let x = window.innerWidth + (i * spacing);
                lane.appendChild(el);
                boxes.push({ el, x, name });
            });
        }

        function jump() {
            if (isJumping) return;
            isJumping = true;
            player.style.bottom = '180px'; // 박스 위치까지 점프
            
            setTimeout(() => {
                player.style.bottom = '80px';
                isJumping = false;
            }, 400);
        }

        function update() {
            boxes.forEach(box => {
                // 박스 이동 속도 (모바일은 약간 느리게)
                box.x -= (window.innerWidth > 768 ? 4 : 3);
                
                // 루프 처리
                if (box.x < -200) {
                    let rightmostX = Math.max(...boxes.map(b => b.x));
                    let spacing = window.innerWidth > 768 ? 300 : 200;
                    box.x = rightmostX + spacing;
                }
                
                box.el.style.left = box.x + 'px';

                // 충돌 감지
                const pRect = player.getBoundingClientRect();
                const bRect = box.el.getBoundingClientRect();

                if (isJumping && 
                    pRect.left < bRect.right && pRect.right > bRect.left &&
                    pRect.top < bRect.bottom && pRect.bottom > bRect.top) {
                    
                    // 성공 피드백
                    screen.innerText = box.name;
                    screen.classList.add('active');
                    box.el.style.transform = 'translateY(-10px)';
                    box.el.style.background = '#fff';
                    box.el.style.color = '#000';

                    setTimeout(() => {
                        box.el.style.transform = 'translateY(0)';
                        box.el.style.background = 'transparent';
                        box.el.style.color = '#fff';
                    }, 200);
                }
            });
            requestAnimationFrame(update);
        }

        initBoxes();
        update();
    </script>
</body>
</html>